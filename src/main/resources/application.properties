# ============================================
# CONFIGURACION UNIFICADA - DESARROLLO LOCAL
# ============================================

# === Informacion de la Aplicacion ===
spring.application.name=mental-clinic-api

# === Base de Datos - H2 en memoria (modo PostgreSQL) ===
# Configuracion optimizada para desarrollo local con compatibilidad PostgreSQL
spring.r2dbc.url=r2dbc:h2:mem:///mental-clinic-db;DB_CLOSE_DELAY=-1;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE
spring.r2dbc.username=sa
spring.r2dbc.password=
spring.sql.init.mode=always
spring.sql.init.platform=h2

# === Cache - Caffeine ===
# maximumSize: maximo 500 entradas en cache
# expireAfterWrite: las entradas expiran despues de 30 minutos
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=500,expireAfterWrite=30m

# === Logging - Configuracion detallada para desarrollo ===
logging.level.root=INFO
logging.level.com.clinica.mentalhealth=DEBUG
logging.level.org.springframework.r2dbc=DEBUG
logging.level.org.springframework.data.r2dbc=DEBUG
logging.level.io.r2dbc.h2=DEBUG
logging.level.org.springframework.security=DEBUG

# === OpenAPI/Swagger - Documentacion de API ===
springdoc.api-docs.enabled=true
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha

# === Actuator - Monitoreo y metricas ===
management.endpoints.web.exposure.include=health,info,metrics,caches,env
management.endpoint.health.show-details=always
management.endpoint.caches.enabled=true

# === Servidor ===
server.port=8080
server.error.include-message=always
server.error.include-stacktrace=on_param
server.error.include-binding-errors=always

# === IA (DeepSeek via OpenAI Driver) ===
# Usa el driver OpenAI de Spring AI apuntando a la API de DeepSeek
spring.ai.openai.api-key=${DEEPSEEK_API_KEY}
spring.ai.openai.base-url=https://api.deepseek.com
spring.ai.openai.chat.options.model=deepseek-chat
spring.ai.openai.chat.options.temperature=0.3
spring.ai.openai.chat.options.max-tokens=2000

